<!DOCTYPE html>
<html lang="en">
  <head id="includes">
    <style></style>
  </head>

  <body>
    <header></header>
    <main class="container-xl">
      <h1>Gallery</h1>
      <div class="gallery1">
        <div id="tsum-tabs">
          <input id="tab1" type="radio" name="tabs" checked />
          <label for="tab1">Images</label>

          <input id="tab2" type="radio" name="tabs" />
          <label for="tab2">Videos</label>

          <section id="content1">
            <div id="my_nanogallery2_images"></div>
          </section>

          <section id="content2">
            <div id="my_nanogallery2_videos"></div>
          </section>
        </div>
      </div>
    </main>
    <footer></footer>
  </body>
  <!-- Load the Google API Client Library for JavaScript -->
  <script
    src="https://apis.google.com/js/platform.js?onload=init"
    async
    defer
  ></script>
  <script
    src="https://apis.google.com/js/client:plusone.js"
    type="application/javascript"
  ></script>

  <script src="scripts/jquery.min.js"></script>
  <script src="scripts/popper.min.js"></script>
  <script src="scripts/bootstrap.min.js"></script>
  <script src="scripts/jquery.nanogallery2.min.js"></script>
  <script src="scripts/script.js"></script>

  <script>
    const FOLDER_ID = "1Nd726HAO5zMDBDRmcKmFEHIfKCn4zPkq";
    const API_KEY = "AIzaSyDQFjS6qyS8P39IWROCEf1Vf5h96_BuNgI";
    const CHANNEL_ID="UCGzMdPUq7zXcp_KFKZa9MDg";
    $(document).ready(() => {
      getDriveFilesInFolder(FOLDER_ID, API_KEY);
      getVideos(
        "1Nd726HAO5zMDBDRmcKmFEHIfKCn4zPkq",
        "AIzaSyDQFjS6qyS8P39IWROCEf1Vf5h96_BuNgI"
      );
    });

    async function getDriveFilesInFolder(folderId, apiKey) {
      try {
        const response = await fetch(
          `https://www.googleapis.com/drive/v3/files?q="${folderId}"+in+parents&key=${apiKey}`
        );
        const data = await response.json();
        bindImages(data.files);
        return data.files;
      } catch (error) {
        console.error(error);
      }
    }

    function bindImages(images) {
      const items = images.map((ele) => {
        return {
          src: "https://drive.google.com/u/0/uc?id=" + ele.id,
          title: ele.name,
        };
      });
      // console.log(items);
      $("#my_nanogallery2_images").nanogallery2({
        items,
      });
    }
    async function getVideos() {
      await fetch(
        `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=${CHANNEL_ID}&type=video&key=${API_KEY}`
      )
        .then((res) => res.json())
        .then((response) => {
          const data = response;
          const videos = data.items;
          let videoHtml = "";
          const items = videos.map((element) => {
            console.log(element);
            return {
              src: `https://www.youtube.com/watch?v=${element.id.videoId}`,
              title: element.snippet.title,
            };
          });
          $("#my_nanogallery2_videos").nanogallery2({
            items,
          });
        });
    }
  </script>
</html>
